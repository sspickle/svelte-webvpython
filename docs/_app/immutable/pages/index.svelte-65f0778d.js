import{_ as G}from"../chunks/preload-helper-5c232d89.js";import{S as J,i as K,s as N,e as u,t as X,k as W,c as d,a as w,h as H,d as h,m as T,b as a,K as V,g as Q,J as s,L as Y,n as D,w as Z,M}from"../chunks/index-19bb5ac6.js";function ee(){return new Worker("/svelte-webvpython/_app/immutable/assets/editor.worker.6369e042.js",{type:"module"})}function te(){return new Worker("/svelte-webvpython/_app/immutable/assets/json.worker.cc26763b.js",{type:"module"})}function re(){return new Worker("/svelte-webvpython/_app/immutable/assets/css.worker.57c3cb89.js",{type:"module"})}function se(){return new Worker("/svelte-webvpython/_app/immutable/assets/html.worker.ae09e20d.js",{type:"module"})}function ne(){return new Worker("/svelte-webvpython/_app/immutable/assets/ts.worker.bcb033c8.js",{type:"module"})}const oe=async i=>{console.log("loading prep");let e;const n=fetch("vpython.zip").then(_=>_.arrayBuffer());let c=await loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/dev/full/",stdout:i||null,stderr:i||null});const v=await n;return console.log("Unpacking package"),c.unpackArchive(v,"zip"),console.log("Importing vpython package"),window.__context={glowscript_container:$("#glowscript").removeAttr("id")},e=window.canvas,e(),c};function ae(i){let e,n,c,v,_,o,r,f,p,I,x,y,q,C,g,t,l,k,P,E,j,A,S;return{c(){e=u("div"),n=u("div"),c=u("button"),v=X("Run"),_=W(),o=u("div"),r=u("meta"),f=W(),p=u("script"),x=W(),y=u("script"),C=W(),g=u("script"),l=W(),k=u("div"),P=W(),E=u("div"),j=u("textarea"),this.h()},l(R){e=d(R,"DIV",{class:!0});var m=w(e);n=d(m,"DIV",{class:!0});var z=w(n);c=d(z,"BUTTON",{});var B=w(c);v=H(B,"Run"),B.forEach(h),z.forEach(h),_=T(m),o=d(m,"DIV",{id:!0,class:!0});var b=w(o);r=d(b,"META",{"http-equiv":!0,content:!0}),f=T(b),p=d(b,"SCRIPT",{type:!0,src:!0});var U=w(p);U.forEach(h),x=T(b),y=d(b,"SCRIPT",{type:!0,src:!0});var O=w(y);O.forEach(h),C=T(b),g=d(b,"SCRIPT",{type:!0,src:!0});var F=w(g);F.forEach(h),b.forEach(h),l=T(m),k=d(m,"DIV",{class:!0}),w(k).forEach(h),P=T(m),E=d(m,"DIV",{class:!0});var L=w(E);j=d(L,"TEXTAREA",{rows:!0,cols:!0}),w(j).forEach(h),L.forEach(h),m.forEach(h),this.h()},h(){c.disabled=!0,a(n,"class","buttonCol svelte-1hh0l62"),a(r,"http-equiv","Content-Type"),a(r,"content","text/html; charset=utf-8"),a(p,"type","text/javascript"),V(p.src,I="https://www.glowscript.org/lib/jquery/2.1/jquery.min.js")||a(p,"src",I),a(y,"type","text/javascript"),V(y.src,q="https://www.glowscript.org/lib/jquery/2.1/jquery-ui.custom.min.js")||a(y,"src",q),a(g,"type","text/javascript"),V(g.src,t="https://www.glowscript.org/package/glow.3.2.min.js")||a(g,"src",t),a(o,"id","glowscript"),a(o,"class","glowscript glowCol svelte-1hh0l62"),a(k,"class","editCol svelte-1hh0l62"),a(j,"rows","20"),a(j,"cols","80"),a(E,"class","stdoutRow svelte-1hh0l62"),a(e,"class","container svelte-1hh0l62")},m(R,m){Q(R,e,m),s(e,n),s(n,c),s(c,v),i[4](c),s(e,_),s(e,o),s(o,r),s(o,f),s(o,p),s(o,x),s(o,y),s(o,C),s(o,g),s(e,l),s(e,k),i[6](k),s(e,P),s(e,E),s(E,j),i[7](j),A||(S=Y(c,"click",i[5]),A=!0)},p:D,i:D,o:D,d(R){R&&h(e),i[4](null),i[6](null),i[7](null),A=!1,S()}}}function ie(i,e,n){let c=`
from vpython import *
import numpy as np

import sys
print(sys.version)

r = 2 + 3j
s = sphere(pos=vec(r.real,r.imag,0), color=color.blue, make_trail=True)
print("hello" + f"{abs(3 + 4j)}")

while True:
   rate(30)
   r = r*np.exp(1j*0.05)
   s.pos = vec(r.real, r.imag, 0)
`,v=null,_,o,r=null,f,p;Z(async()=>(self.MonacoEnvironment={getWorker(t,l){return l==="json"?new te:l==="css"||l==="scss"||l==="less"?new re:l==="html"||l==="handlebars"||l==="razor"?new se:l==="typescript"||l==="javascript"?new ne:new ee}},o=await G(()=>import("../chunks/editor.main-e6b76b67.js").then(function(t){return t.e}),["chunks/editor.main-e6b76b67.js","assets/editor.main-d036fd4a.css","chunks/preload-helper-5c232d89.js"]),_=o.editor.create(v,{value:c,language:"python"}),p=await oe(x),r&&n(1,r.disabled=!1,r),()=>{_.dispose()}));async function I(){r&&(n(1,r.disabled=!0,r),n(1,r.innerText="Running...",r));var t=_.getValue().split("rate(").join("await async_rate(");try{await p.loadPackagesFromImports(t);var l=await p.runPythonAsync(t)}catch(k){console.log("Error:"+k)}}function x(t){n(2,f.value+=t+`
`,f)}function y(t){M[t?"unshift":"push"](()=>{r=t,n(1,r)})}const q=()=>{I()};function C(t){M[t?"unshift":"push"](()=>{v=t,n(0,v)})}function g(t){M[t?"unshift":"push"](()=>{f=t,n(2,f)})}return[v,r,f,I,y,q,C,g]}class pe extends J{constructor(e){super(),K(this,e,ie,ae,N,{})}}export{pe as default};
