import{_ as se}from"../chunks/preload-helper-5c232d89.js";import{S as oe,i as ne,s as ae,e as l,t as L,k as b,c,a as h,h as U,d as p,m as k,b as o,K as O,g as ie,J as t,L as le,n as F,w as ce,M as G}from"../chunks/index-19bb5ac6.js";function pe(){return new Worker("/svelte-webvpython/_app/immutable/assets/editor.worker.6369e042.js",{type:"module"})}function ue(){return new Worker("/svelte-webvpython/_app/immutable/assets/json.worker.cc26763b.js",{type:"module"})}function de(){return new Worker("/svelte-webvpython/_app/immutable/assets/css.worker.57c3cb89.js",{type:"module"})}function he(){return new Worker("/svelte-webvpython/_app/immutable/assets/html.worker.ae09e20d.js",{type:"module"})}function ve(){return new Worker("/svelte-webvpython/_app/immutable/assets/ts.worker.bcb033c8.js",{type:"module"})}const me=async i=>{console.log("loading prep");let r;const n=fetch("vpython.zip").then(f=>f.arrayBuffer());let u=await loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/dev/full/",stdout:i||null,stderr:i||null});const w=await n;return console.log("Unpacking package"),u.unpackArchive(w,"zip"),console.log("Importing vpython package"),window.__context={glowscript_container:$("#glowscript").removeAttr("id")},r=window.canvas,r(),u};function we(i){let r,n,u,w,f,m,s,y,j,_,R,V,a,E,C,e,d,q,W,J,D,x,K,M,P,z,I,T,B,N;return{c(){r=l("div"),n=l("div"),u=l("button"),w=L("Run"),f=b(),m=l("div"),s=l("p"),y=L("This is a very crude attempt to demo WebVPython using Pyodide."),j=b(),_=l("p"),R=L("So far we have sphere, cone, box, arrow, helix, rate, and vector."),V=b(),a=l("div"),E=l("meta"),C=b(),e=l("script"),q=b(),W=l("script"),D=b(),x=l("script"),M=b(),P=l("div"),z=b(),I=l("div"),T=l("textarea"),this.h()},l(S){r=c(S,"DIV",{class:!0});var v=h(r);n=c(v,"DIV",{class:!0});var X=h(n);u=c(X,"BUTTON",{});var H=h(u);w=U(H,"Run"),H.forEach(p),X.forEach(p),f=k(v),m=c(v,"DIV",{class:!0});var A=h(m);s=c(A,"P",{});var Q=h(s);y=U(Q,"This is a very crude attempt to demo WebVPython using Pyodide."),Q.forEach(p),j=k(A),_=c(A,"P",{});var Y=h(_);R=U(Y,"So far we have sphere, cone, box, arrow, helix, rate, and vector."),Y.forEach(p),A.forEach(p),V=k(v),a=c(v,"DIV",{id:!0,class:!0});var g=h(a);E=c(g,"META",{"http-equiv":!0,content:!0}),C=k(g),e=c(g,"SCRIPT",{type:!0,src:!0});var ee=h(e);ee.forEach(p),q=k(g),W=c(g,"SCRIPT",{type:!0,src:!0});var te=h(W);te.forEach(p),D=k(g),x=c(g,"SCRIPT",{type:!0,src:!0});var re=h(x);re.forEach(p),g.forEach(p),M=k(v),P=c(v,"DIV",{class:!0}),h(P).forEach(p),z=k(v),I=c(v,"DIV",{class:!0});var Z=h(I);T=c(Z,"TEXTAREA",{rows:!0,cols:!0}),h(T).forEach(p),Z.forEach(p),v.forEach(p),this.h()},h(){u.disabled=!0,o(n,"class","buttonCol svelte-a7eyh4"),o(m,"class","explainRow svelte-a7eyh4"),o(E,"http-equiv","Content-Type"),o(E,"content","text/html; charset=utf-8"),o(e,"type","text/javascript"),O(e.src,d="https://www.glowscript.org/lib/jquery/2.1/jquery.min.js")||o(e,"src",d),o(W,"type","text/javascript"),O(W.src,J="https://www.glowscript.org/lib/jquery/2.1/jquery-ui.custom.min.js")||o(W,"src",J),o(x,"type","text/javascript"),O(x.src,K="https://www.glowscript.org/package/glow.3.2.min.js")||o(x,"src",K),o(a,"id","glowscript"),o(a,"class","glowscript glowCol svelte-a7eyh4"),o(P,"class","editCol svelte-a7eyh4"),o(T,"rows","20"),o(T,"cols","80"),o(I,"class","stdoutRow svelte-a7eyh4"),o(r,"class","container svelte-a7eyh4")},m(S,v){ie(S,r,v),t(r,n),t(n,u),t(u,w),i[4](u),t(r,f),t(r,m),t(m,s),t(s,y),t(m,j),t(m,_),t(_,R),t(r,V),t(r,a),t(a,E),t(a,C),t(a,e),t(a,q),t(a,W),t(a,D),t(a,x),t(r,M),t(r,P),i[6](P),t(r,z),t(r,I),t(I,T),i[7](T),B||(N=le(u,"click",i[5]),B=!0)},p:F,i:F,o:F,d(S){S&&p(r),i[4](null),i[6](null),i[7](null),B=!1,N()}}}function fe(i,r,n){let u=`
from vpython import *
import numpy as np

import sys
print(sys.version)

r = 2 + 3j
s = sphere(pos=vec(r.real,r.imag,0), color=color.blue, make_trail=True)
print("hello" + f"{abs(3 + 4j)}")

while True:
   rate(30)
   r = r*np.exp(1j*0.05)
   s.pos = vec(r.real, r.imag, 0)
`,w=null,f,m,s=null,y,j;ce(async()=>(self.MonacoEnvironment={getWorker(e,d){return d==="json"?new ue:d==="css"||d==="scss"||d==="less"?new de:d==="html"||d==="handlebars"||d==="razor"?new he:d==="typescript"||d==="javascript"?new ve:new pe}},m=await se(()=>import("../chunks/editor.main-e6b76b67.js").then(function(e){return e.e}),["chunks/editor.main-e6b76b67.js","assets/editor.main-d036fd4a.css","chunks/preload-helper-5c232d89.js"]),f=m.editor.create(w,{value:u,language:"python"}),j=await me(R),s&&n(1,s.disabled=!1,s),()=>{f.dispose()}));async function _(){s&&(n(1,s.disabled=!0,s),n(1,s.innerText="Running...",s));var e=f.getValue().split("rate(").join("await async_rate(");try{await j.loadPackagesFromImports(e);var d=await j.runPythonAsync(e)}catch(q){console.log("Error:"+q)}}function R(e){n(2,y.value+=e+`
`,y)}function V(e){G[e?"unshift":"push"](()=>{s=e,n(1,s)})}const a=()=>{_()};function E(e){G[e?"unshift":"push"](()=>{w=e,n(0,w)})}function C(e){G[e?"unshift":"push"](()=>{y=e,n(2,y)})}return[w,s,y,_,V,a,E,C]}class ge extends oe{constructor(r){super(),ne(this,r,fe,we,ae,{})}}export{ge as default};
