import{_ as se}from"../chunks/preload-helper-5c232d89.js";import{S as oe,i as ne,s as ae,e as l,t as L,k as b,c,a as h,h as U,d as p,m as k,b as n,K as O,g as ie,J as t,L as le,n as F,w as ce,M as G}from"../chunks/index-19bb5ac6.js";function pe(){return new Worker("/svelte-webvpython/_app/immutable/assets/editor.worker.6369e042.js",{type:"module"})}function ue(){return new Worker("/svelte-webvpython/_app/immutable/assets/json.worker.cc26763b.js",{type:"module"})}function de(){return new Worker("/svelte-webvpython/_app/immutable/assets/css.worker.57c3cb89.js",{type:"module"})}function he(){return new Worker("/svelte-webvpython/_app/immutable/assets/html.worker.ae09e20d.js",{type:"module"})}function ve(){return new Worker("/svelte-webvpython/_app/immutable/assets/ts.worker.bcb033c8.js",{type:"module"})}const me=async i=>{console.log("loading prep");let r;const s=fetch("vpython.zip").then(y=>y.arrayBuffer());let u=await loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/dev/full/",stdout:i||null,stderr:i||null});const f=await s;return console.log("Unpacking package"),u.unpackArchive(f,"zip"),console.log("Importing vpython package"),window.__context={glowscript_container:$("#glowscript").removeAttr("id")},r=window.canvas,r(),u};function we(i){let r,s,u,f,y,m,o,w,j,_,V,C,a,E,q,e,d,P,W,J,D,x,K,M,I,z,R,T,B,N;return{c(){r=l("div"),s=l("div"),u=l("button"),f=L("Run"),y=b(),m=l("div"),o=l("p"),w=L("This is a very crude attempt to demo WebVPython using Pyodide."),j=b(),_=l("p"),V=L("So far we have sphere, cone, box, arrow, helix, rate, and vector."),C=b(),a=l("div"),E=l("meta"),q=b(),e=l("script"),P=b(),W=l("script"),D=b(),x=l("script"),M=b(),I=l("div"),z=b(),R=l("div"),T=l("textarea"),this.h()},l(S){r=c(S,"DIV",{class:!0});var v=h(r);s=c(v,"DIV",{class:!0});var X=h(s);u=c(X,"BUTTON",{});var H=h(u);f=U(H,"Run"),H.forEach(p),X.forEach(p),y=k(v),m=c(v,"DIV",{class:!0});var A=h(m);o=c(A,"P",{});var Q=h(o);w=U(Q,"This is a very crude attempt to demo WebVPython using Pyodide."),Q.forEach(p),j=k(A),_=c(A,"P",{});var Y=h(_);V=U(Y,"So far we have sphere, cone, box, arrow, helix, rate, and vector."),Y.forEach(p),A.forEach(p),C=k(v),a=c(v,"DIV",{id:!0,class:!0});var g=h(a);E=c(g,"META",{"http-equiv":!0,content:!0}),q=k(g),e=c(g,"SCRIPT",{type:!0,src:!0});var ee=h(e);ee.forEach(p),P=k(g),W=c(g,"SCRIPT",{type:!0,src:!0});var te=h(W);te.forEach(p),D=k(g),x=c(g,"SCRIPT",{type:!0,src:!0});var re=h(x);re.forEach(p),g.forEach(p),M=k(v),I=c(v,"DIV",{class:!0}),h(I).forEach(p),z=k(v),R=c(v,"DIV",{class:!0});var Z=h(R);T=c(Z,"TEXTAREA",{rows:!0,cols:!0}),h(T).forEach(p),Z.forEach(p),v.forEach(p),this.h()},h(){u.disabled=!0,n(s,"class","buttonCol svelte-a7eyh4"),n(m,"class","explainRow svelte-a7eyh4"),n(E,"http-equiv","Content-Type"),n(E,"content","text/html; charset=utf-8"),n(e,"type","text/javascript"),O(e.src,d="https://www.glowscript.org/lib/jquery/2.1/jquery.min.js")||n(e,"src",d),n(W,"type","text/javascript"),O(W.src,J="https://www.glowscript.org/lib/jquery/2.1/jquery-ui.custom.min.js")||n(W,"src",J),n(x,"type","text/javascript"),O(x.src,K="https://www.glowscript.org/package/glow.3.2.min.js")||n(x,"src",K),n(a,"id","glowscript"),n(a,"class","glowscript glowCol svelte-a7eyh4"),n(I,"class","editCol svelte-a7eyh4"),n(T,"rows","20"),n(T,"cols","80"),n(R,"class","stdoutRow svelte-a7eyh4"),n(r,"class","container svelte-a7eyh4")},m(S,v){ie(S,r,v),t(r,s),t(s,u),t(u,f),i[4](u),t(r,y),t(r,m),t(m,o),t(o,w),t(m,j),t(m,_),t(_,V),t(r,C),t(r,a),t(a,E),t(a,q),t(a,e),t(a,P),t(a,W),t(a,D),t(a,x),t(r,M),t(r,I),i[6](I),t(r,z),t(r,R),t(R,T),i[7](T),B||(N=le(u,"click",i[5]),B=!0)},p:F,i:F,o:F,d(S){S&&p(r),i[4](null),i[6](null),i[7](null),B=!1,N()}}}function fe(i,r,s){let u=`
from vpython import *
import numpy as np

import sys
print(sys.version)

r = 2 + 3j
s = sphere(pos=vec(r.real,r.imag,0), color=color.blue, make_trail=True)
print("hello" + f"{abs(3 + 4j)}")

while True:
   rate(30)
   r = r*np.exp(1j*0.05)
   s.pos = vec(r.real, r.imag, 0)
`,f=null,y,m,o=null,w,j;ce(async()=>(self.MonacoEnvironment={getWorker(e,d){return d==="json"?new ue:d==="css"||d==="scss"||d==="less"?new de:d==="html"||d==="handlebars"||d==="razor"?new he:d==="typescript"||d==="javascript"?new ve:new pe}},m=await se(()=>import("../chunks/editor.main-e6b76b67.js").then(function(e){return e.e}),["chunks/editor.main-e6b76b67.js","assets/editor.main-d036fd4a.css","chunks/preload-helper-5c232d89.js"]),y=m.editor.create(f,{value:u,language:"python"}),j=await me(V),o&&s(1,o.disabled=!1,o),()=>{y.dispose()}));async function _(){o&&(s(1,o.disabled=!0,o),s(1,o.innerText="Running...",o));var e=y.getValue().split("rate(").join("await async_rate(");try{await j.loadPackagesFromImports(e);var d=await j.runPythonAsync(e)}catch(P){console.log("Error:"+P),s(2,w.value+="Error:"+P+`
`,w)}}function V(e){s(2,w.value+=e+`
`,w)}function C(e){G[e?"unshift":"push"](()=>{o=e,s(1,o)})}const a=()=>{_()};function E(e){G[e?"unshift":"push"](()=>{f=e,s(0,f)})}function q(e){G[e?"unshift":"push"](()=>{w=e,s(2,w)})}return[f,o,w,_,C,a,E,q]}class ge extends oe{constructor(r){super(),ne(this,r,fe,we,ae,{})}}export{ge as default};
